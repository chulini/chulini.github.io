<html>
<head>
    <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<meta name="google-site-verification" content="VrJ_5sbiz02gK5WqwfSLQ8V2XP4T2R1Zn0frzu90R7w" />
<link rel="icon" href="/images/icon2-64.png" type="image/x-icon" />

<link rel="stylesheet" href="/css/reset.css">


    
<link rel="stylesheet" href="/css/style.css">

    
<link rel="stylesheet" href="/css/highlight.css">

    
<link rel="stylesheet" href="/css/zdog.css">

    
    
    <link href="https://fonts.googleapis.com/css?family=Vollkorn&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Source+Code+Pro&display=swap" rel="stylesheet">
    <title>{NotYet‚ö°}</title>

    <link href="https://fonts.googleapis.com/css?family=Varela+Round&display=swap" rel="stylesheet">
<meta name="generator" content="Hexo 4.2.0"></head>

    
    <body>
        <div class="top-band"></div>
        <div class="wrap">
            <header>
    <a href="/" class="header-link-home">
        <img src="/images/logo2.png">
    </a>
    <ul class="nav nav-list">
        <li class="nav-list-item"><a class="nav-list-link" href="/">Home</a></li>
        <li class="nav-list-item"><a class="nav-list-link" href="/blog">Blog</a></li>
        <li class="nav-list-item"><a class="nav-list-link" href="/games">Games</a></li>
        <li class="nav-list-item"><a class="nav-list-link" href="/about">About</a></li>
    </ul>
    
</header>


            <div class="middle">
                
<div class="join" >
    <img class="join-bg" src="/images/bubble.svg">
    <div class="join-content">

        <!-- Begin Mailchimp Signup Form -->
<link href="//cdn-images.mailchimp.com/embedcode/horizontal-slim-10_7.css" rel="stylesheet" type="text/css">
<style type="text/css">
    #mc_embed_signup{background: transparent; clear:left; font:14px Helvetica,Arial,sans-serif; width:100%;}
    #mc_embed_signup label, #mc_embed_signup p{
        font-family: 'Source Code Pro', monospace;
        color: #000;
        font-weight: bold;
        margin: 0 0 20px 0;
        line-height: 30px;
        font-size: 14px;
        text-align: center;
    }
    #mc_embed_signup p{color:#666; font-weight: normal;}
	/* Add your own Mailchimp form style overrides in your site stylesheet or in this style block.
	   We recommend moving this block and the preceding CSS link to the HEAD of your HTML file. */
</style>
<div id="mc_embed_signup">
<form action="https://games.us4.list-manage.com/subscribe/post?u=2bb8a45b43e13f5409852b77a&amp;id=c672452f30" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate>
    <div id="mc_embed_signup_scroll">
    <label for="mce-EMAIL">üëÄ Subcribe to upcoming games (*cough cough* JetJump... üèÉüí•üí®) and special promotions.</label>
	<input type="email" value="" name="EMAIL" class="email" id="mce-EMAIL" placeholder="email address" required>
    <!-- real people should not fill this in and expect good things - do not remove this or risk form bot signups-->
    <div style="position: absolute; left: -5000px;" aria-hidden="true"><input type="text" name="b_2bb8a45b43e13f5409852b77a_c672452f30" tabindex="-1" value=""></div>
    <div class="clear"><input type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe" class="button"></div>
    </div>
</form>
<p><img src="/images/spam2.gif" /></p>
</div>

<!--End mc_embed_signup-->

        <!-- div class="join-left">
            <h2><a href="https://discord.gg/3KVcU8p" target="_blank" rel="noopener">Let's stay in touch! Join the discord channel</a></h2>
            <p>See you there!ü§úüí•ü§õ</p>
        </div>
        <div class="join-right">
            <a href="https://discord.gg/3KVcU8p" target="_blank" rel="noopener"><img src="/images/discord.png" class="join-discord"></a>
        </div -->
        <!-- div class="join-middle"></div>
        <div class="join-right">
            <p>Receive news about my next game release (I will not spam you. I hate spam too!)</p>
            <form>
                <input type="text">
            </form>
        </div -->
    </div>
    
</div>

<div class="post-content">
    <h2 class="title"><a href="/ik/index.html">What Is Inverse Kinematics? the New IK Unity3D System</a></h2>
    <p class="date">Nov 5th 2019</p>
    <p><strong>Inverse Kinematics</strong> allows you to modify any animation in runtime so you can make a specific joint to follow a target ignoring partially or totally the animation being played. In Unity3D 2019 <strong>there is a new and easy way to implement them</strong>. Let‚Äôs implement this:</p>
<video id="vid" allowfullscreen playsinline autoplay muted loop controls>
  <source src="/ik/ik-final.mp4" type="video/webm">
    Your browser does not support the video tag.
</video>

<a id="more"></a>

<h1 id="Forward-Kinematics"><a href="#Forward-Kinematics" class="headerlink" title="Forward Kinematics"></a>Forward Kinematics</h1><p>When you play an animation in a mesh. The position of every joint is defined by the animation. This method is called <a href="https://en.wikipedia.org/wiki/Forward_kinematics" target="_blank" rel="noopener">forward kinematics</a>. And forward kinematics sucks.</p>
<h1 id="What-is-the-problem-with-forward-kinematics"><a href="#What-is-the-problem-with-forward-kinematics" class="headerlink" title="What is the problem with forward kinematics?"></a>What is the problem with forward kinematics?</h1><p>In forward kinematics, every joint moves the next one from the inside out. In humans, the <strong>spine</strong> moves the <strong>shoulder</strong> which moves the <strong>elbow</strong> which moves the <strong>wrist</strong> which moves the <strong>hand</strong>.</p>
<p>The problem with that makes evident when we want to make the <strong>hand</strong> to move to a specific position. To do that we need to define the hole animation from the spine to the hand. Even worse if the target position of the hand changes in runtime we are totally fucked.</p>
<p>Animations between characters like a simple handshake are a total pain to implement with forward kinematics.</p>
<p>When we don‚Äôt control the animation in runtime there is no chance the animated character can interact with any changing environment. </p>
<p>Just a little bump in the floor could make the character show wrong poses.</p>
<p>In animations, especially in humanoid, it is pretty useful to set the position of the hands or the foot in runtime. </p>
<img src="/ik/ik-fail0.png" class="" title="Forward Kinematics failing">
<center>

<p>(<a href="https://www.youtube.com/watch?v=rGB1ipH6DrM" target="_blank" rel="noopener">source</a>)</center></p>
<p>Here is when <strong>Inverse Kinematics</strong> comes to the rescue.</p>
<h1 id="Inverse-Kinematics-IK"><a href="#Inverse-Kinematics-IK" class="headerlink" title="Inverse Kinematics (IK)"></a>Inverse Kinematics (IK)</h1><p><strong>IK</strong> allows you to define an animation in runtime from outside to inside. You can define for example to move the feet to the top of the small bump in the floor.</p>
<img src="/ik/ik.gif" class="" title="Forward Kinematics winning">
<center>

<p>(<a href="https://www.youtube.com/watch?v=rGB1ipH6DrM" target="_blank" rel="noopener">source</a>)</center></p>
<video id="vid" allowfullscreen playsinline autoplay muted loop controls>
  <source src="/ik/ik-spider.webm" type="video/webm">
    Your browser does not support the video tag.
</video>
<center>

<p>(<a href="https://twitter.com/screenshakes/status/1175092749286223873?s=19" target="_blank" rel="noopener">source</a>)</p>
</center>

<h1 id="Awesome-How-do-I-IK-in-Unity2019"><a href="#Awesome-How-do-I-IK-in-Unity2019" class="headerlink" title="Awesome! How do I IK in Unity2019?"></a>Awesome! How do I IK in Unity2019?</h1><h2 id="Install-Animation-Rigging-preview-package"><a href="#Install-Animation-Rigging-preview-package" class="headerlink" title="Install Animation Rigging preview package"></a>Install Animation Rigging preview package</h2><p>First, you have to download and install the Animation Rigging preview package.</p>
<p>Go to <code>Windows -&gt; Package Manager</code> </p>
<p>In <code>Advanced</code>, make sure the <code>Show Preview Packages</code> is enabled.<br>(It will take a while. Just be patient.)</p>
<p>Click <code>Animation Rigging</code> preview package and then install it at the bottom right corner of the Package window.</p>
<video id="vid" allowfullscreen playsinline autoplay muted loop controls>
  <source src="/ik/ik-tutorial-0-install.mp4" type="video/webm">
    Your browser does not support the video tag.
</video>

<h2 id="Setup-your-animated-character-as-usual"><a href="#Setup-your-animated-character-as-usual" class="headerlink" title="Setup your animated character as usual"></a>Setup your animated character as usual</h2><p>Setup your animated character as usual. In my case, I‚Äôve made a <a href="https://github.com/chulini/ik" target="_blank" rel="noopener">Unity Project</a> with a simple humanoid playing a looped walking animation.</p>
<video id="vid" allowfullscreen playsinline autoplay muted loop controls>
  <source src="/ik/ik-tutorial-1-walk.mp4" type="video/webm">
    Your browser does not support the video tag.
</video>

<h2 id="Optional-Visualize-Bones"><a href="#Optional-Visualize-Bones" class="headerlink" title="(Optional) Visualize Bones"></a>(Optional) Visualize Bones</h2><p>If you want you can visualize any bones by adding a component called <code>BoneRenderer</code> to the root of your character.</p>
<video id="vid" allowfullscreen playsinline autoplay muted loop controls>
  <source src="/ik/ik-tutorial-2-bones.mp4" type="video/webm">
    Your browser does not support the video tag.
</video>

<h2 id="Setup-your-runtime-rig"><a href="#Setup-your-runtime-rig" class="headerlink" title="Setup your runtime rig"></a>Setup your runtime rig</h2><ol>
<li>Add <code>RigBuilder</code> component to the root of your character</li>
<li>Create an empty object inside the root of your character</li>
<li>Add <code>Rig</code> component to that object and name it <code>Rig</code></li>
<li>Add your <code>Rig</code> component to the <code>RigBuilder</code> you added first</li>
</ol>
<video id="vid" allowfullscreen playsinline autoplay muted loop controls>
  <source src="/ik/ik-tutorial-3-rig.mp4" type="video/webm">
    Your browser does not support the video tag.
</video>

<h2 id="Setup-your-IK-constraint"><a href="#Setup-your-IK-constraint" class="headerlink" title="Setup your IK constraint"></a>Setup your IK constraint</h2><ol>
<li>In your <code>Rig</code> object add a <code>TwoBoneIKConstraint</code> component</li>
<li>Assign the <strong>Root</strong>, <strong>Mid</strong>, and <strong>Tip</strong> <code>Transforms</code></li>
</ol>
<video id="vid" allowfullscreen playsinline autoplay muted loop controls>
  <source src="/ik/ik-tutorial-4-constraint.mp4" type="video/webm">
    Your browser does not support the video tag.
</video>

<h2 id="Create-a-Target-GameObject-and-assign-it-to-the-IK-constraint"><a href="#Create-a-Target-GameObject-and-assign-it-to-the-IK-constraint" class="headerlink" title="Create a Target GameObject and assign it to the IK constraint"></a>Create a Target GameObject and assign it to the IK constraint</h2><ol>
<li>Create a new GameObject inside your <code>Rig</code> GameObject and name it <code>Target</code></li>
<li>Set the target in the desired position</li>
</ol>
<video id="vid" allowfullscreen playsinline autoplay muted loop controls>
  <source src="/ik/ik-tutorial-5-target.webm" type="video/webm">
    Your browser does not support the video tag.
</video>

<h2 id="Play-and-enjoy"><a href="#Play-and-enjoy" class="headerlink" title="Play and enjoy!"></a>Play and enjoy!</h2><video id="vid" allowfullscreen playsinline autoplay muted loop controls>
  <source src="/ik/ik-tutorial-6-play.mp4" type="video/webm">
    Your browser does not support the video tag.
</video>

<p>Feel free to download or clone the project here<br><a href="https://github.com/chulini/ik" target="_blank" rel="noopener">https://github.com/chulini/ik</a></p>

</div>

<div class="join" >
    <img class="join-bg" src="/images/bubble.svg">
    <div class="join-content">

        <!-- Begin Mailchimp Signup Form -->
<link href="//cdn-images.mailchimp.com/embedcode/horizontal-slim-10_7.css" rel="stylesheet" type="text/css">
<style type="text/css">
    #mc_embed_signup{background: transparent; clear:left; font:14px Helvetica,Arial,sans-serif; width:100%;}
    #mc_embed_signup label, #mc_embed_signup p{
        font-family: 'Source Code Pro', monospace;
        color: #000;
        font-weight: bold;
        margin: 0 0 20px 0;
        line-height: 30px;
        font-size: 14px;
        text-align: center;
    }
    #mc_embed_signup p{color:#666; font-weight: normal;}
	/* Add your own Mailchimp form style overrides in your site stylesheet or in this style block.
	   We recommend moving this block and the preceding CSS link to the HEAD of your HTML file. */
</style>
<div id="mc_embed_signup">
<form action="https://games.us4.list-manage.com/subscribe/post?u=2bb8a45b43e13f5409852b77a&amp;id=c672452f30" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate>
    <div id="mc_embed_signup_scroll">
    <label for="mce-EMAIL">üëÄ Subcribe to upcoming games (*cough cough* JetJump... üèÉüí•üí®) and special promotions.</label>
	<input type="email" value="" name="EMAIL" class="email" id="mce-EMAIL" placeholder="email address" required>
    <!-- real people should not fill this in and expect good things - do not remove this or risk form bot signups-->
    <div style="position: absolute; left: -5000px;" aria-hidden="true"><input type="text" name="b_2bb8a45b43e13f5409852b77a_c672452f30" tabindex="-1" value=""></div>
    <div class="clear"><input type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe" class="button"></div>
    </div>
</form>
<p><img src="/images/spam2.gif" /></p>
</div>

<!--End mc_embed_signup-->

        <!-- div class="join-left">
            <h2><a href="https://discord.gg/3KVcU8p" target="_blank" rel="noopener">Let's stay in touch! Join the discord channel</a></h2>
            <p>See you there!ü§úüí•ü§õ</p>
        </div>
        <div class="join-right">
            <a href="https://discord.gg/3KVcU8p" target="_blank" rel="noopener"><img src="/images/discord.png" class="join-discord"></a>
        </div -->
        <!-- div class="join-middle"></div>
        <div class="join-right">
            <p>Receive news about my next game release (I will not spam you. I hate spam too!)</p>
            <form>
                <input type="text">
            </form>
        </div -->
    </div>
    
</div>


<div id="disqus_thread"></div>

            </div>
        </div>
        <div class="footer">
    <p>Website made in <a href="https://hexo.io/" target="_blank">Hexo</a>. Home animation made in <a href="https://zzz.dog/" target="_blank">ZDog</a>. With ‚ù§Ô∏è by <a href="http://twitter.com/chulini" target="_blank">JQ</a>.</p>
</div>

    <script>
      var disqus_shortname = 'notyet-1';
      
      var disqus_url = 'https://notyet.games/ik/';
      
      (function(){
        var dsq = document.createElement('script');
        dsq.type = 'text/javascript';
        dsq.async = true;
        dsq.src = '//go.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      })();
    </script>
    
    

    </body>    
    

</html>